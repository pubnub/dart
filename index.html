<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="pubnub API docs, for the Dart programming language.">
  <title>pubnub - Dart API docs</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">
  
</head>

<body data-base-href="" data-using-base-href="false" class="light-theme">
<div id="overlay-under-drawer"></div>
<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="https://www.pubnub.com/docs/sdks/dart">pubnub package</a></li>
  </ol>
  <div class="self-name">pubnub</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <div class="toggle" id="theme-button" title="Toggle brightness">
    <label for="theme">
      <input type="checkbox" id="theme" value="light-theme">
      <span id="dark-theme-button" class="material-symbols-outlined">
        dark_mode
      </span>
      <span id="light-theme-button" class="material-symbols-outlined">
        light_mode
      </span>
    </label>
  </div>
</header>
<main>
  <div id="dartdoc-main-content" class="main-content">
      
<section class="desc markdown">
  <h1 id="pubnub-dart-sdk">PubNub Dart SDK</h1>
<p><a href="https://pub.dev/packages/pubnub"><img src="https://img.shields.io/pub/v/pubnub" alt="Pub Version"></a></p>
<blockquote>
<p><code>pubnub</code> is a Flutter-friendly SDK written in Dart that allows you to connect to PubNub Data Streaming Network and add real-time features to your application.</p>
</blockquote>
<h2 id="installation">Installation</h2>
<h3 id="using-pub-dependency-management-tool">Using <code>pub</code> dependency management tool</h3>
<p><code>pubnub</code> uses the standard <code>pub</code> tool for package management to distribute Dart code.</p>
<p>To add the package to your Dart or Flutter project, add <code>pubnub</code> as a dependency in your <code>pubspec.yaml</code>.</p>
<pre class="language-yaml"><code class="language-yaml">dependencies:
  pubnub: ^5.1.0
</code></pre>
<p>After adding the dependency to <code>pubspec.yaml</code>, run the <code>dart pub get</code> command in the root directory of your project (the same that the <code>pubspec.yaml</code> is in).</p>
<h3 id="using-git">Using Git</h3>
<p>If you want to use the latest, unreleased version of <code>pubnub</code>, you can add it to <code>pubspec.yaml</code> as a Git package.</p>
<pre class="language-yaml"><code class="language-yaml">dependencies:
  pubnub:
    git: git://github.com/pubnub/dart.git
    path: pubnub
</code></pre>
<h3 id="using-a-local-copy-of-the-repository">Using a local copy of the repository</h3>
<p>If you want to copy the Dart repository and modify it locally, clone it using <code>git clone https://github.com/pubnub/dart</code> and then import it into <code>pubspec.yaml</code> as follows:</p>
<pre class="language-yaml"><code class="language-yaml">dependencies:
  pubnub:
    path: ../path-to-cloned-pubnub-repo
</code></pre>
<h2 id="importing">Importing</h2>
<p>After you install the <code>pubnub</code> package, import it in your application.
You can import it in one of two ways:</p>
<pre class="language-dart"><code class="language-dart">// Import all PubNub objects into your namespace
import 'package:pubnub/core.dart';

// Or import PubNub into a named namespace
import 'package:pubnub/pubnub.dart' as pn;
</code></pre>
<h2 id="usage">Usage</h2>
<h3 id="keyset">Keyset</h3>
<p>First, create a <a href="https://pub.dev/documentation/pubnub/latest/pubnub/Keyset-class.html"><code>Keyset</code></a> instance:</p>
<pre class="language-dart"><code class="language-dart">final myKeyset = Keyset(
  subscribeKey: 'demo',
  publishKey: 'demo',
  uuid: UUID('demo'));
</code></pre>
<p><code>Keyset</code> contains all your configuration. You can use multiple Keysets (with different parameters) if you need.</p>
<p>If you have a PubNub account, replace <code>demo</code> with the key values from your <a href="https://dashboard.pubnub.com">PubNub dashboard</a>. If you don't, you can use the highly rate-limited <code>demo</code> keys, but be aware that the keyset is public, so don't send any sensitive data.</p>
<h3 id="pubnub-instance">PubNub instance</h3>
<p>Next, instantiate the <code>PubNub</code> class, passing <code>myKeyset</code> as a default keyset. This will be used any time a keyset is not passed into a method.</p>
<pre class="language-dart"><code class="language-dart">final pubnub = PubNub(defaultKeyset: myKeyset);
</code></pre>
<p>Now you can use the <code>pubnub</code> instance to publish messages, subscribe to channels, and <a href="https://pub.dev/documentation/pubnub/latest/pubnub/PubNub-class.html">everything else</a>!</p>
<h3 id="publishing-messages">Publishing messages</h3>
<p>To publish a message, use the <code>publish</code> method.</p>
<pre class="language-dart"><code class="language-dart">pubnub.publish('my_channel', { 'content': 'Hello world!' });
</code></pre>
<p>Messages can be any JSON-serializable object.</p>
<p>If you are going to publish a lot of messages to one channel, you can use <code>channel</code> abstraction to obtain an instance of a <a href="https://pub.dev/documentation/pubnub/latest/pubnub/Channel-class.html"><code>Channel</code></a>.</p>
<pre class="language-dart"><code class="language-dart">final myChannel = pubnub.channel('my_channel');

myChannel.publish(200);
myChannel.publish({ 'answer': 42 });
</code></pre>
<h3 id="subscribing-to-channels">Subscribing to channels</h3>
<p>To subscribe to a list of channels or channel groups, use the <code>subscribe</code> method.
You need to pass a <code>Set</code> of channels or channel groups.</p>
<pre class="language-dart"><code class="language-dart">var subscription = pubnub.subscribe(channels: {'ch1', 'ch2'});
</code></pre>
<p>You can also use your <code>Channel</code> instance:</p>
<pre class="language-dart"><code class="language-dart">var subscription = myChannel.subscribe();
</code></pre>
<p>Both of those methods return a <a href="https://pub.dev/documentation/pubnub/latest/pubnub/Subscription-class.html"><code>Subscription</code></a>.</p>
<p>A Subscription contains a Dart <code>Stream</code> messages from the channel(s) to which you are subscribed. You can transform that stream in the usual ways, or add a listener using <code>listen</code>:</p>
<pre class="language-dart"><code class="language-dart">subscription.messages.listen((envelope) {
  print(`${envelope.uuid} sent a message: ${envelope.payload}`);
});

var envelope =
      await sub.messages.firstWhere((envelope) =&gt; envelope.channel == 'ch2');
</code></pre>
<h3 id="channel-history">Channel history</h3>
<p>You can retrieve past messages from a channel in two ways, as follows:</p>
<h4 id="using-channelhistory">Using <code>channel.history</code></h4>
<p>Use this method if you want to fetch messages gradually. They are fetched in descending order (from newest to oldest) by default.</p>
<pre class="language-dart"><code class="language-dart">var history = myChannel.history(chunkSize: 50);

await history.more();
print(history.messages.length); // 50
await history.more();
print(history.messages.length); // 100
</code></pre>
<h4 id="using-channelmessages">Using <code>channel.messages</code></h4>
<p>Use this method to fetch many messages at once.</p>
<pre class="language-dart"><code class="language-dart">var history = myChannel.messages(from: Timetoken(1234567890));

var count = await history.count();
print(count);

var messages = await history.fetch();
print(messages.length);

await history.delete(); // Beware! This will delete all messages matched
</code></pre>
<h3 id="multiple-keysets">Multiple keysets</h3>
<p>There are two ways to use multiple keysets at the same time, as follows:</p>
<h4 id="using-named-keysets">Using named keysets</h4>
<p>You can add multiple keysets with a name to an instance of <code>PubNub</code>.</p>
<pre class="language-dart"><code class="language-dart">pubnub.keysets.add(myKeyset1, name: 'keyset1');
pubnub.keysets.add(myKeyset2, name: 'keyset2');
</code></pre>
<p>To use a named keyset instead of the default, pass its name in a <code>using:</code> parameter into one of the <code>pubnub</code> instance methods:</p>
<pre class="language-dart"><code class="language-dart">pubnub.publish('channel', 42, using: 'keyset1');
var myChannel = pubnub.channel('channel', using: 'keyset2');
</code></pre>
<h4 id="using-a-keyset-instance">Using a keyset instance</h4>
<p>Instead of adding the keyset to <code>pubnub.keysets</code>, you can use the <code>keyset:</code> named parameter to pass a keyset instance directly to <code>pubnub</code> instance methods:</p>
<pre class="language-dart"><code class="language-dart">pubnub.subscribe(channels: {'channel'}, keyset: myKeyset1)
</code></pre>
<h2 id="contributing">Contributing</h2>
<ol>
<li>
<p>Clone the repository.</p>
<pre class="language-bash"><code class="language-bash">git clone https://github.com/pubnub/dart.git
</code></pre>
</li>
<li>
<p>Enter the directory and install dependencies.</p>
<pre class="language-bash"><code class="language-bash">cd dart
dart pub get
</code></pre>
</li>
<li>
<p>Run the <code>build_runner</code> to generate necessary source files.</p>
<pre class="language-bash"><code class="language-bash">dart pub run build_runner build
</code></pre>
</li>
</ol>
</section>


      <section class="summary">
          <h2>Libraries</h2>
        <dl>
          <dt id="pubnub">
  <span class="name"><a href="pubnub/pubnub-library.html">pubnub</a></span> 

</dt>
<dd>PubNub is an SDK that allows you to communicate with
PubNub Data Streaming Network in a fast and easy manner.
</dd>

          <h3>Modules</h3>
            <dt id="pubnub.crypto">
  <span class="name"><a href="pubnub.crypto/pubnub.crypto-library.html">crypto</a></span> 
    <span class="category modules cp-7" title="This is part of the Modules topic.">Modules</span>

</dt>
<dd>Default cryptography module used by PubNub SDK.
</dd>

            <dt id="pubnub.logging">
  <span class="name"><a href="pubnub.logging/pubnub.logging-library.html">logging</a></span> 
    <span class="category modules cp-7" title="This is part of the Modules topic.">Modules</span>

</dt>
<dd>Default logging module used by PubNub SDK.
</dd>

            <dt id="pubnub.networking">
  <span class="name"><a href="pubnub.networking/pubnub.networking-library.html">networking</a></span> 
    <span class="category modules cp-7" title="This is part of the Modules topic.">Modules</span>

</dt>
<dd>Default networking module used by PubNub SDK.
</dd>

        </dl>
      </section>
  </div> <!-- /.main-content -->
  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>
<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="https://www.pubnub.com/docs/sdks/dart">pubnub package</a></li>
</ol>

    <h5 class="hidden-xs"><span class="package-name">pubnub</span> <span class="package-kind">package</span></h5>
    <ol>
      <li class="section-title">Topics</li>
        <li><a href="topics/Basic Features-topic.html">Basic&nbsp;Features</a></li>
        <li><a href="topics/Objects-topic.html">Objects</a></li>
        <li><a href="topics/Files-topic.html">Files</a></li>
        <li><a href="topics/Push-topic.html">Push</a></li>
        <li><a href="topics/Access Manager-topic.html">Access&nbsp;Manager</a></li>
        <li><a href="topics/Exceptions-topic.html">Exceptions</a></li>
        <li><a href="topics/Results-topic.html">Results</a></li>
      <li class="section-title">Libraries</li>
      <li><a href="pubnub/pubnub-library.html">pubnub</a></li>
      <li class="section-subtitle">Modules</li>
        <li class="section-subitem"><a href="pubnub.crypto/pubnub.crypto-library.html">crypto</a></li>
        <li class="section-subitem"><a href="pubnub.logging/pubnub.logging-library.html">logging</a></li>
        <li class="section-subitem"><a href="pubnub.networking/pubnub.networking-library.html">networking</a></li>
</ol>

  </div>
  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div>
</main>
<footer>
  <span class="no-break">
    pubnub
      5.1.0
  </span>
  
</footer>


<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/docs.dart.js"></script>

</body>
</html>

